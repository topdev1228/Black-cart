<?php
declare(strict_types=1);

namespace Tests\Fixtures\Domains\Orders\Traits;

use Illuminate\Support\Facades\Date;

trait OrderRecalculateTotalsData
{
    public static function orderRecalculateTotalsDataProvider(): array
    {
        return array_merge(
            [
                'Single tbyb item, no discounts, checkout transaction only, no refunds, partially paid' => [
                    'order' => [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        // original amounts at time of checkout
                        'total_shop_amount' => 10000,
                        'total_customer_amount' => 10000,
                        'original_outstanding_shop_amount' => 9000,
                        'original_outstanding_customer_amount' => 9000,
                        'original_tbyb_gross_sales_shop_amount' => 10000,
                        'original_tbyb_gross_sales_customer_amount' => 10000,
                        'original_tbyb_discounts_shop_amount' => 0,
                        'original_tbyb_discounts_customer_amount' => 0,
                        'original_upfront_gross_sales_shop_amount' => 0,
                        'original_upfront_gross_sales_customer_amount' => 0,
                        'original_upfront_discounts_shop_amount' => 0,
                        'original_upfront_discounts_customer_amount' => 0,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 0,
                        'tbyb_refund_gross_sales_customer_amount' => 0,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 10000,
                        'tbyb_net_sales_customer_amount' => 10000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 10000,
                        'total_net_sales_customer_amount' => 10000,
                        // outstanding
                        'outstanding_shop_amount' => 9000,
                        'outstanding_customer_amount' => 9000,
                    ],
                    'refunds' => [],
                    'transactions' => [
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'sale',
                            'shop_amount' => 1000,
                            'customer_amount' => 1000,
                        ],
                    ],
                    'assertions' => [
                        'order' => [
                            'completed' => false,
                            // refunds
                            'tbyb_refund_gross_sales_shop_amount' => 0,
                            'tbyb_refund_gross_sales_customer_amount' => 0,
                            'upfront_refund_gross_sales_shop_amount' => 0,
                            'upfront_refund_gross_sales_customer_amount' => 0,
                            'tbyb_refund_discounts_shop_amount' => 0,
                            'tbyb_refund_discounts_customer_amount' => 0,
                            'upfront_refund_discounts_shop_amount' => 0,
                            'upfront_refund_discounts_customer_amount' => 0,
                            'total_order_level_refunds_shop_amount' => 0,
                            'total_order_level_refunds_customer_amount' => 0,
                            // net sales
                            'tbyb_net_sales_shop_amount' => 10000,
                            'tbyb_net_sales_customer_amount' => 10000,
                            'upfront_net_sales_shop_amount' => 0,
                            'upfront_net_sales_customer_amount' => 0,
                            'total_net_sales_shop_amount' => 10000,
                            'total_net_sales_customer_amount' => 10000,
                            // outstanding
                            'outstanding_shop_amount' => 9000,
                            'outstanding_customer_amount' => 9000,
                        ],
                    ],
                ],
                'Single tbyb item, no discounts, multiple transactions, no refunds, partially paid' => [
                    'order' => [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        // original amounts at time of checkout
                        'total_shop_amount' => 10000,
                        'total_customer_amount' => 10000,
                        'original_outstanding_shop_amount' => 9000,
                        'original_outstanding_customer_amount' => 9000,
                        'original_tbyb_gross_sales_shop_amount' => 10000,
                        'original_tbyb_gross_sales_customer_amount' => 10000,
                        'original_tbyb_discounts_shop_amount' => 0,
                        'original_tbyb_discounts_customer_amount' => 0,
                        'original_upfront_gross_sales_shop_amount' => 0,
                        'original_upfront_gross_sales_customer_amount' => 0,
                        'original_upfront_discounts_shop_amount' => 0,
                        'original_upfront_discounts_customer_amount' => 0,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 0,
                        'tbyb_refund_gross_sales_customer_amount' => 0,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 10000,
                        'tbyb_net_sales_customer_amount' => 10000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 10000,
                        'total_net_sales_customer_amount' => 10000,
                        // outstanding
                        'outstanding_shop_amount' => 9000,
                        'outstanding_customer_amount' => 9000,
                    ],
                    'refunds' => [],
                    'transactions' => [
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'sale',
                            'shop_amount' => 1000,
                            'customer_amount' => 1000,
                        ],
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'sale',
                            'shop_amount' => 2000,
                            'customer_amount' => 2000,
                        ],
                    ],
                    'assertions' => [
                        'order' => [
                            'completed' => false,
                            // refunds
                            'tbyb_refund_gross_sales_shop_amount' => 0,
                            'tbyb_refund_gross_sales_customer_amount' => 0,
                            'upfront_refund_gross_sales_shop_amount' => 0,
                            'upfront_refund_gross_sales_customer_amount' => 0,
                            'tbyb_refund_discounts_shop_amount' => 0,
                            'tbyb_refund_discounts_customer_amount' => 0,
                            'upfront_refund_discounts_shop_amount' => 0,
                            'upfront_refund_discounts_customer_amount' => 0,
                            'total_order_level_refunds_shop_amount' => 0,
                            'total_order_level_refunds_customer_amount' => 0,
                            // net sales
                            'tbyb_net_sales_shop_amount' => 10000,
                            'tbyb_net_sales_customer_amount' => 10000,
                            'upfront_net_sales_shop_amount' => 0,
                            'upfront_net_sales_customer_amount' => 0,
                            'total_net_sales_shop_amount' => 10000,
                            'total_net_sales_customer_amount' => 10000,
                            // outstanding
                            'outstanding_shop_amount' => 7000,
                            'outstanding_customer_amount' => 7000,
                        ],
                    ],
                ],
                'Single tbyb item, no discounts, sale + auth + capture transactions, no refunds, fully paid' => [
                    'order' => [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        // original amounts at time of checkout
                        'total_shop_amount' => 10000,
                        'total_customer_amount' => 10000,
                        'original_outstanding_shop_amount' => 9000,
                        'original_outstanding_customer_amount' => 9000,
                        'original_tbyb_gross_sales_shop_amount' => 10000,
                        'original_tbyb_gross_sales_customer_amount' => 10000,
                        'original_tbyb_discounts_shop_amount' => 0,
                        'original_tbyb_discounts_customer_amount' => 0,
                        'original_upfront_gross_sales_shop_amount' => 0,
                        'original_upfront_gross_sales_customer_amount' => 0,
                        'original_upfront_discounts_shop_amount' => 0,
                        'original_upfront_discounts_customer_amount' => 0,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 0,
                        'tbyb_refund_gross_sales_customer_amount' => 0,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 10000,
                        'tbyb_net_sales_customer_amount' => 10000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 10000,
                        'total_net_sales_customer_amount' => 10000,
                        // outstanding
                        'outstanding_shop_amount' => 9000,
                        'outstanding_customer_amount' => 9000,
                    ],
                    'refunds' => [],
                    'transactions' => [
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'sale',
                            'shop_amount' => 1000,
                            'customer_amount' => 1000,
                        ],
                        [
                            'id' => 'transaction_id_111',
                            'source_id' => 'gid://shopify/OrderTransaction/111',
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'authorization',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'authorization_expires_at' => Date::now()->addDays(7),
                        ],
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'capture',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'parent_transaction_id' => 'transaction_id_111',
                            'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                        ],
                    ],
                    'assertions' => [
                        'order' => [
                            'completed' => true,
                            // refunds
                            'tbyb_refund_gross_sales_shop_amount' => 0,
                            'tbyb_refund_gross_sales_customer_amount' => 0,
                            'upfront_refund_gross_sales_shop_amount' => 0,
                            'upfront_refund_gross_sales_customer_amount' => 0,
                            'tbyb_refund_discounts_shop_amount' => 0,
                            'tbyb_refund_discounts_customer_amount' => 0,
                            'upfront_refund_discounts_shop_amount' => 0,
                            'upfront_refund_discounts_customer_amount' => 0,
                            'total_order_level_refunds_shop_amount' => 0,
                            'total_order_level_refunds_customer_amount' => 0,
                            // net sales
                            'tbyb_net_sales_shop_amount' => 10000,
                            'tbyb_net_sales_customer_amount' => 10000,
                            'upfront_net_sales_shop_amount' => 0,
                            'upfront_net_sales_customer_amount' => 0,
                            'total_net_sales_shop_amount' => 10000,
                            'total_net_sales_customer_amount' => 10000,
                            // outstanding
                            'outstanding_shop_amount' => 0,
                            'outstanding_customer_amount' => 0,
                        ],
                    ],
                ],
                'Single tbyb item, no discounts, sale + auth + failed capture  + capture transactions, no refunds, fully paid' => [
                    'order' => [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        // original amounts at time of checkout
                        'total_shop_amount' => 10000,
                        'total_customer_amount' => 10000,
                        'original_outstanding_shop_amount' => 9000,
                        'original_outstanding_customer_amount' => 9000,
                        'original_tbyb_gross_sales_shop_amount' => 10000,
                        'original_tbyb_gross_sales_customer_amount' => 10000,
                        'original_tbyb_discounts_shop_amount' => 0,
                        'original_tbyb_discounts_customer_amount' => 0,
                        'original_upfront_gross_sales_shop_amount' => 0,
                        'original_upfront_gross_sales_customer_amount' => 0,
                        'original_upfront_discounts_shop_amount' => 0,
                        'original_upfront_discounts_customer_amount' => 0,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 0,
                        'tbyb_refund_gross_sales_customer_amount' => 0,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 10000,
                        'tbyb_net_sales_customer_amount' => 10000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 10000,
                        'total_net_sales_customer_amount' => 10000,
                        // outstanding
                        'outstanding_shop_amount' => 9000,
                        'outstanding_customer_amount' => 9000,
                    ],
                    'refunds' => [],
                    'transactions' => [
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'sale',
                            'shop_amount' => 1000,
                            'customer_amount' => 1000,
                        ],
                        [
                            'id' => 'transaction_id_111',
                            'source_id' => 'gid://shopify/OrderTransaction/111',
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'authorization',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'authorization_expires_at' => Date::now()->addDays(7),
                        ],
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'capture',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'parent_transaction_id' => null,
                            'parent_transaction_source_id' => null,
                            'status' => 'failure',
                        ],
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'capture',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'parent_transaction_id' => 'transaction_id_111',
                            'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                            'status' => 'success',
                        ],
                    ],
                    'assertions' => [
                        'order' => [
                            'completed' => true,
                            // refunds
                            'tbyb_refund_gross_sales_shop_amount' => 0,
                            'tbyb_refund_gross_sales_customer_amount' => 0,
                            'upfront_refund_gross_sales_shop_amount' => 0,
                            'upfront_refund_gross_sales_customer_amount' => 0,
                            'tbyb_refund_discounts_shop_amount' => 0,
                            'tbyb_refund_discounts_customer_amount' => 0,
                            'upfront_refund_discounts_shop_amount' => 0,
                            'upfront_refund_discounts_customer_amount' => 0,
                            'total_order_level_refunds_shop_amount' => 0,
                            'total_order_level_refunds_customer_amount' => 0,
                            // net sales
                            'tbyb_net_sales_shop_amount' => 10000,
                            'tbyb_net_sales_customer_amount' => 10000,
                            'upfront_net_sales_shop_amount' => 0,
                            'upfront_net_sales_customer_amount' => 0,
                            'total_net_sales_shop_amount' => 10000,
                            'total_net_sales_customer_amount' => 10000,
                            // outstanding
                            'outstanding_shop_amount' => 0,
                            'outstanding_customer_amount' => 0,
                        ],
                    ],
                ],
                'Single tbyb item, no discounts, sale + auth + re-auth + failed capture + capture transactions, no refunds, fully paid' => [
                    'order' => [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        // original amounts at time of checkout
                        'total_shop_amount' => 10000,
                        'total_customer_amount' => 10000,
                        'original_outstanding_shop_amount' => 9000,
                        'original_outstanding_customer_amount' => 9000,
                        'original_tbyb_gross_sales_shop_amount' => 10000,
                        'original_tbyb_gross_sales_customer_amount' => 10000,
                        'original_tbyb_discounts_shop_amount' => 0,
                        'original_tbyb_discounts_customer_amount' => 0,
                        'original_upfront_gross_sales_shop_amount' => 0,
                        'original_upfront_gross_sales_customer_amount' => 0,
                        'original_upfront_discounts_shop_amount' => 0,
                        'original_upfront_discounts_customer_amount' => 0,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 0,
                        'tbyb_refund_gross_sales_customer_amount' => 0,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 10000,
                        'tbyb_net_sales_customer_amount' => 10000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 10000,
                        'total_net_sales_customer_amount' => 10000,
                        // outstanding
                        'outstanding_shop_amount' => 9000,
                        'outstanding_customer_amount' => 9000,
                    ],
                    'refunds' => [],
                    'transactions' => [
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'sale',
                            'shop_amount' => 1000,
                            'customer_amount' => 1000,
                        ],
                        [
                            'id' => 'transaction_id_111',
                            'source_id' => 'gid://shopify/OrderTransaction/111',
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'authorization',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'authorization_expires_at' => Date::now()->addDays(7),
                        ],
                        [
                            'id' => 'transaction_id_112',
                            'source_id' => 'gid://shopify/OrderTransaction/112',
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'authorization',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'authorization_expires_at' => Date::now()->addDays(7),
                        ],
                        [
                            'id' => 'transaction_id_113',
                            'source_id' => 'gid://shopify/OrderTransaction/113',
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'void', // voids transaction_id_111
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                        ],
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'capture', // tries to capture transaction_id_111
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'parent_transaction_id' => null,
                            'parent_transaction_source_id' => null,
                            'status' => 'failure',
                        ],
                        [
                            'shop_currency' => 'USD',
                            'customer_currency' => 'USD',
                            'kind' => 'capture',
                            'shop_amount' => 9000,
                            'customer_amount' => 9000,
                            'parent_transaction_id' => 'transaction_id_111',
                            'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                            'status' => 'success',
                        ],
                    ],
                    'assertions' => [
                        'order' => [
                            'completed' => true,
                            // refunds
                            'tbyb_refund_gross_sales_shop_amount' => 0,
                            'tbyb_refund_gross_sales_customer_amount' => 0,
                            'upfront_refund_gross_sales_shop_amount' => 0,
                            'upfront_refund_gross_sales_customer_amount' => 0,
                            'tbyb_refund_discounts_shop_amount' => 0,
                            'tbyb_refund_discounts_customer_amount' => 0,
                            'upfront_refund_discounts_shop_amount' => 0,
                            'upfront_refund_discounts_customer_amount' => 0,
                            'total_order_level_refunds_shop_amount' => 0,
                            'total_order_level_refunds_customer_amount' => 0,
                            // net sales
                            'tbyb_net_sales_shop_amount' => 10000,
                            'tbyb_net_sales_customer_amount' => 10000,
                            'upfront_net_sales_shop_amount' => 0,
                            'upfront_net_sales_customer_amount' => 0,
                            'total_net_sales_shop_amount' => 10000,
                            'total_net_sales_customer_amount' => 10000,
                            // outstanding
                            'outstanding_shop_amount' => 0,
                            'outstanding_customer_amount' => 0,
                        ],
                    ],
                ],
            ],
            static::orderRecalculateTotalsDataProviderWithRefunds(),
        );
    }

    public static function orderRecalculateTotalsDataProviderWithRefunds(): array
    {
        return [
            'Single tbyb item, no discounts, sale + auth + capture transactions, all refunded, fully paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 10000,
                    'total_customer_amount' => 10000,
                    'original_outstanding_shop_amount' => 9000,
                    'original_outstanding_customer_amount' => 9000,
                    'original_tbyb_gross_sales_shop_amount' => 10000,
                    'original_tbyb_gross_sales_customer_amount' => 10000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 0,
                    'original_upfront_gross_sales_customer_amount' => 0,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 10000,
                    'tbyb_net_sales_customer_amount' => 10000,
                    'upfront_net_sales_shop_amount' => 0,
                    'upfront_net_sales_customer_amount' => 0,
                    'total_net_sales_shop_amount' => 10000,
                    'total_net_sales_customer_amount' => 10000,
                    // outstanding
                    'outstanding_shop_amount' => 9000,
                    'outstanding_customer_amount' => 9000,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 10000,
                        'tbyb_gross_sales_shop_amount' => 10000,
                        'tbyb_total_customer_amount' => 10000,
                        'tbyb_total_shop_amount' => 10000,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 1000,
                        'refunded_customer_amount' => 1000,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 1000,
                        'customer_amount' => 1000,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 9000,
                        'customer_amount' => 9000,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => true,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 10000,
                        'tbyb_refund_gross_sales_customer_amount' => 10000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 0,
                        'tbyb_net_sales_customer_amount' => 0,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 0,
                        'total_net_sales_customer_amount' => 0,
                        // outstanding
                        'outstanding_shop_amount' => 0,
                        'outstanding_customer_amount' => 0,
                    ],
                ],
            ],
            'Multiple tbyb items, no discounts, checkout transaction only, 1 line item refund, partially paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 10000,
                    'total_customer_amount' => 10000,
                    'original_outstanding_shop_amount' => 9000,
                    'original_outstanding_customer_amount' => 9000,
                    'original_tbyb_gross_sales_shop_amount' => 10000,
                    'original_tbyb_gross_sales_customer_amount' => 10000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 0,
                    'original_upfront_gross_sales_customer_amount' => 0,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 10000,
                    'tbyb_net_sales_customer_amount' => 10000,
                    'upfront_net_sales_shop_amount' => 0,
                    'upfront_net_sales_customer_amount' => 0,
                    'total_net_sales_shop_amount' => 10000,
                    'total_net_sales_customer_amount' => 10000,
                    // outstanding
                    'outstanding_shop_amount' => 9000,
                    'outstanding_customer_amount' => 9000,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 5000,
                        'tbyb_total_shop_amount' => 5000,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 1000,
                        'refunded_customer_amount' => 1000,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 1000,
                        'customer_amount' => 1000,
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 5000,
                        'tbyb_net_sales_customer_amount' => 5000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 5000,
                        'total_net_sales_customer_amount' => 5000,
                        // outstanding
                        'outstanding_shop_amount' => 5000,
                        'outstanding_customer_amount' => 5000,
                    ],
                ],
            ],
            'Multiple tbyb items, no discounts, multiple transactions, 1 line item refund, partially paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 10000,
                    'total_customer_amount' => 10000,
                    'original_outstanding_shop_amount' => 9000,
                    'original_outstanding_customer_amount' => 9000,
                    'original_tbyb_gross_sales_shop_amount' => 10000,
                    'original_tbyb_gross_sales_customer_amount' => 10000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 0,
                    'original_upfront_gross_sales_customer_amount' => 0,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 10000,
                    'tbyb_net_sales_customer_amount' => 10000,
                    'upfront_net_sales_shop_amount' => 0,
                    'upfront_net_sales_customer_amount' => 0,
                    'total_net_sales_shop_amount' => 10000,
                    'total_net_sales_customer_amount' => 10000,
                    // outstanding
                    'outstanding_shop_amount' => 9000,
                    'outstanding_customer_amount' => 9000,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 5000,
                        'tbyb_total_shop_amount' => 5000,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 1000,
                        'refunded_customer_amount' => 1000,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 1000,
                        'customer_amount' => 1000,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 2000,
                        'customer_amount' => 2000,
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 5000,
                        'tbyb_net_sales_customer_amount' => 5000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 5000,
                        'total_net_sales_customer_amount' => 5000,
                        // outstanding
                        'outstanding_shop_amount' => 3000,
                        'outstanding_customer_amount' => 3000,
                    ],
                ],
            ],
            'Multiple tbyb items, no discounts, sale + auth + capture transactions, 1 line item refund, fully paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 10000,
                    'total_customer_amount' => 10000,
                    'original_outstanding_shop_amount' => 9000,
                    'original_outstanding_customer_amount' => 9000,
                    'original_tbyb_gross_sales_shop_amount' => 10000,
                    'original_tbyb_gross_sales_customer_amount' => 10000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 0,
                    'original_upfront_gross_sales_customer_amount' => 0,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 10000,
                    'tbyb_net_sales_customer_amount' => 10000,
                    'upfront_net_sales_shop_amount' => 0,
                    'upfront_net_sales_customer_amount' => 0,
                    'total_net_sales_shop_amount' => 10000,
                    'total_net_sales_customer_amount' => 10000,
                    // outstanding
                    'outstanding_shop_amount' => 4000,
                    'outstanding_customer_amount' => 4000,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 5000,
                        'tbyb_total_shop_amount' => 5000,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 1000,
                        'refunded_customer_amount' => 1000,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 1000,
                        'customer_amount' => 1000,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 9000,
                        'customer_amount' => 9000,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'capture',
                        'shop_amount' => 4000,
                        'customer_amount' => 4000,
                        'parent_transaction_id' => 'transaction_id_111',
                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 5000,
                        'tbyb_net_sales_customer_amount' => 5000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 5000,
                        'total_net_sales_customer_amount' => 5000,
                        // outstanding
                        'outstanding_shop_amount' => 1000,
                        'outstanding_customer_amount' => 1000,
                    ],
                ],
            ],
            'Mixed cart, no discounts, sale + auth + capture transactions, 1 upfront refund 1 tbyb refund, partially paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 30000,
                    'total_customer_amount' => 30000,
                    'original_outstanding_shop_amount' => 30000 - 10000 - 0.1 * 20000,
                    'original_outstanding_customer_amount' => 30000 - 10000 - 0.1 * 20000,
                    'original_tbyb_gross_sales_shop_amount' => 20000,
                    'original_tbyb_gross_sales_customer_amount' => 20000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 10000,
                    'original_upfront_gross_sales_customer_amount' => 10000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 20000,
                    'tbyb_net_sales_customer_amount' => 20000,
                    'upfront_net_sales_shop_amount' => 10000,
                    'upfront_net_sales_customer_amount' => 10000,
                    'total_net_sales_shop_amount' => 30000,
                    'total_net_sales_customer_amount' => 30000,
                    // outstanding
                    'outstanding_shop_amount' => 18000,
                    'outstanding_customer_amount' => 18000,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 5000,
                        'tbyb_total_shop_amount' => 5000,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 5000,
                        'refunded_customer_amount' => 5000,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 3000,
                        'upfront_gross_sales_shop_amount' => 3000,
                        'upfront_total_customer_amount' => 3000,
                        'upfront_total_shop_amount' => 3000,
                        'refunded_shop_amount' => 3000,
                        'refunded_customer_amount' => 3000,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 12000,
                        'customer_amount' => 12000,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 18000,
                        'customer_amount' => 18000,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'capture',
                        'shop_amount' => 2000,
                        'customer_amount' => 2000,
                        'parent_transaction_id' => 'transaction_id_111',
                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 3000,
                        'upfront_refund_gross_sales_customer_amount' => 3000,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 15000,
                        'tbyb_net_sales_customer_amount' => 15000,
                        'upfront_net_sales_shop_amount' => 7000,
                        'upfront_net_sales_customer_amount' => 7000,
                        'total_net_sales_shop_amount' => 22000,
                        'total_net_sales_customer_amount' => 22000,
                        // outstanding
                        'outstanding_shop_amount' => 16000,
                        'outstanding_customer_amount' => 16000,
                    ],
                ],
            ],
            'Mixed cart, no discounts, sale + auth + capture transactions, multiple order level refunds, partially paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 30000,
                    'total_customer_amount' => 30000,
                    'original_outstanding_shop_amount' => 30000 - 10000 - 0.1 * 20000,
                    'original_outstanding_customer_amount' => 30000 - 10000 - 0.1 * 20000,
                    'original_tbyb_gross_sales_shop_amount' => 20000,
                    'original_tbyb_gross_sales_customer_amount' => 20000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 10000,
                    'original_upfront_gross_sales_customer_amount' => 10000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 20000,
                    'tbyb_net_sales_customer_amount' => 20000,
                    'upfront_net_sales_shop_amount' => 10000,
                    'upfront_net_sales_customer_amount' => 10000,
                    'total_net_sales_shop_amount' => 30000,
                    'total_net_sales_customer_amount' => 30000,
                    // outstanding
                    'outstanding_shop_amount' => 21500,
                    'outstanding_customer_amount' => 21500,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 1000,
                        'order_level_refund_shop_amount' => 1000,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 1000,
                        'refunded_customer_amount' => 1000,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 2500,
                        'order_level_refund_shop_amount' => 2500,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 2500,
                        'refunded_customer_amount' => 2500,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 12000,
                        'customer_amount' => 12000,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 18000,
                        'customer_amount' => 18000,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 1000,
                        'customer_amount' => 1000,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 2500,
                        'customer_amount' => 2500,
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 0,
                        'tbyb_refund_gross_sales_customer_amount' => 0,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 3500,
                        'total_order_level_refunds_customer_amount' => 3500,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 20000,
                        'tbyb_net_sales_customer_amount' => 20000,
                        'upfront_net_sales_shop_amount' => 10000,
                        'upfront_net_sales_customer_amount' => 10000,
                        'total_net_sales_shop_amount' => 30000,
                        'total_net_sales_customer_amount' => 30000,
                        // outstanding
                        'outstanding_shop_amount' => 21500,
                        'outstanding_customer_amount' => 21500,
                    ],
                ],
            ],
            'Mixed cart, no discounts, sale + auth + capture transactions, 1 tbyb refund that exceeds the item value, fully paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 30000,
                    'total_customer_amount' => 30000,
                    'original_outstanding_shop_amount' => 30000 - 10000 - 0.1 * 20000,
                    'original_outstanding_customer_amount' => 30000 - 10000 - 0.1 * 20000,
                    'original_tbyb_gross_sales_shop_amount' => 20000,
                    'original_tbyb_gross_sales_customer_amount' => 20000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 10000,
                    'original_upfront_gross_sales_customer_amount' => 10000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 20000,
                    'tbyb_net_sales_customer_amount' => 20000,
                    'upfront_net_sales_shop_amount' => 10000,
                    'upfront_net_sales_customer_amount' => 10000,
                    'total_net_sales_shop_amount' => 30000,
                    'total_net_sales_customer_amount' => 30000,
                    // outstanding
                    'outstanding_shop_amount' => 18000,
                    'outstanding_customer_amount' => 18000,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 5000,
                        'tbyb_total_shop_amount' => 5000,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 5000,
                        'refunded_customer_amount' => 5000,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 12000,
                        'customer_amount' => 12000,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 18000,
                        'customer_amount' => 18000,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 1700,
                        'customer_amount' => 1700,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'capture',
                        'shop_amount' => 11300,
                        'customer_amount' => 11300,
                        'parent_transaction_id' => 'transaction_id_111',
                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 15000,
                        'tbyb_net_sales_customer_amount' => 15000,
                        'upfront_net_sales_shop_amount' => 10000,
                        'upfront_net_sales_customer_amount' => 10000,
                        'total_net_sales_shop_amount' => 25000,
                        'total_net_sales_customer_amount' => 25000,
                        // outstanding
                        'outstanding_shop_amount' => 6700,
                        'outstanding_customer_amount' => 6700,
                    ],
                ],
            ],
            'Mixed cart, no discounts, sale + auth transactions, 1 tbyb refund, partially paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 28250,
                    'total_customer_amount' => 28250,
                    'original_outstanding_shop_amount' => 10300,
                    'original_outstanding_customer_amount' => 10300,
                    'original_tbyb_gross_sales_shop_amount' => 10000,
                    'original_tbyb_gross_sales_customer_amount' => 10000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 15000,
                    'original_upfront_gross_sales_customer_amount' => 15000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 10000,
                    'tbyb_net_sales_customer_amount' => 10000,
                    'upfront_net_sales_shop_amount' => 15000,
                    'upfront_net_sales_customer_amount' => 15000,
                    'total_net_sales_shop_amount' => 25000,
                    'total_net_sales_customer_amount' => 25000,
                    // outstanding
                    'outstanding_shop_amount' => 10300,
                    'outstanding_customer_amount' => 10300,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 10000,
                        'tbyb_gross_sales_shop_amount' => 10000,
                        'tbyb_total_customer_amount' => 11300,
                        'tbyb_total_shop_amount' => 11300,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 11300,
                        'refunded_customer_amount' => 11300,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 17950,
                        'customer_amount' => 17950,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 10300,
                        'customer_amount' => 10300,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 10000,
                        'tbyb_refund_gross_sales_customer_amount' => 10000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 0,
                        'tbyb_net_sales_customer_amount' => 0,
                        'upfront_net_sales_shop_amount' => 15000,
                        'upfront_net_sales_customer_amount' => 15000,
                        'total_net_sales_shop_amount' => 15000,
                        'total_net_sales_customer_amount' => 15000,
                        // outstanding
                        'outstanding_shop_amount' => 10300,
                        'outstanding_customer_amount' => 10300,
                    ],
                ],
            ],
            'Mixed cart, no discounts, sale + auth transactions, tbyb refund, full refund' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 62150,
                    'total_customer_amount' => 62150,
                    'original_outstanding_shop_amount' => 25750,
                    'original_outstanding_customer_amount' => 25750,
                    'original_tbyb_gross_sales_shop_amount' => 25000,
                    'original_tbyb_gross_sales_customer_amount' => 25000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 30000,
                    'original_upfront_gross_sales_customer_amount' => 30000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 25000,
                    'tbyb_net_sales_customer_amount' => 25000,
                    'upfront_net_sales_shop_amount' => 30000,
                    'upfront_net_sales_customer_amount' => 30000,
                    'total_net_sales_shop_amount' => 55000,
                    'total_net_sales_customer_amount' => 55000,
                    // outstanding
                    'outstanding_shop_amount' => 25750,
                    'outstanding_customer_amount' => 25750,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 25000,
                        'tbyb_gross_sales_shop_amount' => 25000,
                        'tbyb_total_customer_amount' => 28250,
                        'tbyb_total_shop_amount' => 28250,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 28250,
                        'refunded_customer_amount' => 28250,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 36400,
                        'customer_amount' => 36400,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 25750,
                        'customer_amount' => 25750,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 25000,
                        'tbyb_refund_gross_sales_customer_amount' => 25000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 0,
                        'tbyb_net_sales_customer_amount' => 0,
                        'upfront_net_sales_shop_amount' => 30000,
                        'upfront_net_sales_customer_amount' => 30000,
                        'total_net_sales_shop_amount' => 30000,
                        'total_net_sales_customer_amount' => 30000,
                        // outstanding
                        'outstanding_shop_amount' => 25750,
                        'outstanding_customer_amount' => 25750,
                    ],
                ],
            ],
            'Mixed cart, no discounts, with shipping, sale + auth transactions, tbyb refund, under refund' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 36951,
                    'total_customer_amount' => 36951,
                    'original_outstanding_shop_amount' => 25750,
                    'original_outstanding_customer_amount' => 25750,
                    'original_tbyb_gross_sales_shop_amount' => 25000,
                    'original_tbyb_gross_sales_customer_amount' => 25000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 5000,
                    'original_upfront_gross_sales_customer_amount' => 5000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 25000,
                    'tbyb_net_sales_customer_amount' => 25000,
                    'upfront_net_sales_shop_amount' => 5000,
                    'upfront_net_sales_customer_amount' => 5000,
                    'total_net_sales_shop_amount' => 30000,
                    'total_net_sales_customer_amount' => 30000,
                    // outstanding
                    'outstanding_shop_amount' => 25750,
                    'outstanding_customer_amount' => 25750,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 25000,
                        'tbyb_gross_sales_shop_amount' => 25000,
                        'tbyb_total_customer_amount' => 28250,
                        'tbyb_total_shop_amount' => 28250,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 11201,
                        'refunded_customer_amount' => 11201,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 11201,
                        'customer_amount' => 11201,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 25750,
                        'customer_amount' => 25750,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 25000,
                        'tbyb_refund_gross_sales_customer_amount' => 25000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 0,
                        'tbyb_net_sales_customer_amount' => 0,
                        'upfront_net_sales_shop_amount' => 5000,
                        'upfront_net_sales_customer_amount' => 5000,
                        'total_net_sales_shop_amount' => 5000,
                        'total_net_sales_customer_amount' => 5000,
                        // outstanding
                        'outstanding_shop_amount' => 8701,
                        'outstanding_customer_amount' => 8701,
                    ],
                ],
            ],
            'mixed cart, no discounts, with shipping, sale + auth transactions, mixed refund' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 36951,
                    'total_customer_amount' => 36951,
                    'original_outstanding_shop_amount' => 25750,
                    'original_outstanding_customer_amount' => 25750,
                    'original_tbyb_gross_sales_shop_amount' => 25000,
                    'original_tbyb_gross_sales_customer_amount' => 25000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 5000,
                    'original_upfront_gross_sales_customer_amount' => 5000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 25000,
                    'tbyb_net_sales_customer_amount' => 25000,
                    'upfront_net_sales_shop_amount' => 5000,
                    'upfront_net_sales_customer_amount' => 5000,
                    'total_net_sales_shop_amount' => 30000,
                    'total_net_sales_customer_amount' => 30000,
                    // outstanding
                    'outstanding_shop_amount' => 25750,
                    'outstanding_customer_amount' => 25750,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 10000,
                        'tbyb_gross_sales_shop_amount' => 10000,
                        'tbyb_total_customer_amount' => 11300,
                        'tbyb_total_shop_amount' => 11300,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 5000,
                        'upfront_gross_sales_shop_amount' => 5000,
                        'upfront_total_customer_amount' => 5650,
                        'upfront_total_shop_amount' => 5650,
                        'refunded_shop_amount' => 11201,
                        'refunded_customer_amount' => 11201,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 11201,
                        'customer_amount' => 11201,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 25750,
                        'customer_amount' => 25750,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 10000,
                        'tbyb_refund_gross_sales_customer_amount' => 10000,
                        'upfront_refund_gross_sales_shop_amount' => 5000,
                        'upfront_refund_gross_sales_customer_amount' => 5000,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 15000,
                        'tbyb_net_sales_customer_amount' => 15000,
                        'upfront_net_sales_shop_amount' => 0,
                        'upfront_net_sales_customer_amount' => 0,
                        'total_net_sales_shop_amount' => 15000,
                        'total_net_sales_customer_amount' => 15000,
                        // outstanding
                        'outstanding_shop_amount' => 20001,
                        'outstanding_customer_amount' => 20001,
                    ],
                ],
            ],
            'mixed cart, no discounts, with shipping, sale + auth transactions, mixed refund less than deposit' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 36951,
                    'total_customer_amount' => 36951,
                    'original_outstanding_shop_amount' => 25750,
                    'original_outstanding_customer_amount' => 25750,
                    'original_tbyb_gross_sales_shop_amount' => 25000,
                    'original_tbyb_gross_sales_customer_amount' => 25000,
                    'original_tbyb_discounts_shop_amount' => 0,
                    'original_tbyb_discounts_customer_amount' => 0,
                    'original_upfront_gross_sales_shop_amount' => 5000,
                    'original_upfront_gross_sales_customer_amount' => 5000,
                    'original_upfront_discounts_shop_amount' => 0,
                    'original_upfront_discounts_customer_amount' => 0,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 25000,
                    'tbyb_net_sales_customer_amount' => 25000,
                    'upfront_net_sales_shop_amount' => 5000,
                    'upfront_net_sales_customer_amount' => 5000,
                    'total_net_sales_shop_amount' => 30000,
                    'total_net_sales_customer_amount' => 30000,
                    // outstanding
                    'outstanding_shop_amount' => 25750,
                    'outstanding_customer_amount' => 25750,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 0,
                        'order_level_refund_shop_amount' => 0,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 10000,
                        'tbyb_gross_sales_shop_amount' => 10000,
                        'tbyb_total_customer_amount' => 11300,
                        'tbyb_total_shop_amount' => 11300,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 300,
                        'refunded_customer_amount' => 300,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 11201,
                        'customer_amount' => 11201,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 25750,
                        'customer_amount' => 25750,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 10000,
                        'tbyb_refund_gross_sales_customer_amount' => 10000,
                        'upfront_refund_gross_sales_shop_amount' => 0,
                        'upfront_refund_gross_sales_customer_amount' => 0,
                        'tbyb_refund_discounts_shop_amount' => 0,
                        'tbyb_refund_discounts_customer_amount' => 0,
                        'upfront_refund_discounts_shop_amount' => 0,
                        'upfront_refund_discounts_customer_amount' => 0,
                        'total_order_level_refunds_shop_amount' => 0,
                        'total_order_level_refunds_customer_amount' => 0,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 15000,
                        'tbyb_net_sales_customer_amount' => 15000,
                        'upfront_net_sales_shop_amount' => 5000,
                        'upfront_net_sales_customer_amount' => 5000,
                        'total_net_sales_shop_amount' => 20000,
                        'total_net_sales_customer_amount' => 20000,
                        // outstanding
                        'outstanding_shop_amount' => 14750,
                        'outstanding_customer_amount' => 14750,
                    ],
                ],
            ],
            'Mixed cart, with discounts, sale + auth + capture transactions, multiple refunds that exceeds the item value and order level refund, partially paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 35000 + 40000 - 2300 - 8700, // after discounts
                    'total_customer_amount' => 35000 + 40000 - 2300 - 8700,
                    'original_outstanding_shop_amount' => 64000 - 31300 - 0.1 * 35000,
                    'original_outstanding_customer_amount' => 64000 - 31300 - 0.1 * 35000,
                    'original_tbyb_gross_sales_shop_amount' => 35000,
                    'original_tbyb_gross_sales_customer_amount' => 35000,
                    'original_tbyb_discounts_shop_amount' => 2300,
                    'original_tbyb_discounts_customer_amount' => 2300,
                    'original_upfront_gross_sales_shop_amount' => 40000,
                    'original_upfront_gross_sales_customer_amount' => 40000,
                    'original_upfront_discounts_shop_amount' => 8700,
                    'original_upfront_discounts_customer_amount' => 8700,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 32700,
                    'tbyb_net_sales_customer_amount' => 32700,
                    'upfront_net_sales_shop_amount' => 31300,
                    'upfront_net_sales_customer_amount' => 31300,
                    'total_net_sales_shop_amount' => 64000,
                    'total_net_sales_customer_amount' => 64000,
                    // outstanding
                    'outstanding_shop_amount' => 29200,
                    'outstanding_customer_amount' => 29200,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 1700,
                        'order_level_refund_shop_amount' => 1700,
                        'tbyb_discounts_customer_amount' => 200,
                        'tbyb_discounts_shop_amount' => 200,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 4800,
                        'tbyb_total_shop_amount' => 4800,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 6500,
                        'refunded_customer_amount' => 6500,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 6200,
                        'order_level_refund_shop_amount' => 6200,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 400,
                        'upfront_discounts_shop_amount' => 400,
                        'upfront_gross_sales_customer_amount' => 6000,
                        'upfront_gross_sales_shop_amount' => 6000,
                        'upfront_total_customer_amount' => 5600,
                        'upfront_total_shop_amount' => 5600,
                        'refunded_shop_amount' => 11800,
                        'refunded_customer_amount' => 11800,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 400,
                        'order_level_refund_shop_amount' => 400,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 400,
                        'upfront_total_shop_amount' => 400,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 34800,
                        'customer_amount' => 34800,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 29200,
                        'customer_amount' => 29200,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 1700,
                        'customer_amount' => 1700,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 11800,
                        'customer_amount' => 11800,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 400,
                        'customer_amount' => 400,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'capture',
                        'shop_amount' => 4000,
                        'customer_amount' => 4000,
                        'parent_transaction_id' => 'transaction_id_111',
                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 6000,
                        'upfront_refund_gross_sales_customer_amount' => 6000,
                        'tbyb_refund_discounts_shop_amount' => 200,
                        'tbyb_refund_discounts_customer_amount' => 200,
                        'upfront_refund_discounts_shop_amount' => 400,
                        'upfront_refund_discounts_customer_amount' => 400,
                        'total_order_level_refunds_shop_amount' => 8300,
                        'total_order_level_refunds_customer_amount' => 8300,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 27900,
                        'tbyb_net_sales_customer_amount' => 27900,
                        'upfront_net_sales_shop_amount' => 25700,
                        'upfront_net_sales_customer_amount' => 25700,
                        'total_net_sales_shop_amount' => 53600,
                        'total_net_sales_customer_amount' => 53600,
                        // outstanding
                        'outstanding_shop_amount' => 33700,
                        'outstanding_customer_amount' => 33700,
                    ],
                ],
            ],
            'Mixed cart, with discounts, sale + auth + capture transactions, multiple refunds that exceeds the item value and order level refund, fully paid' => [
                'order' => [
                    'shop_currency' => 'USD',
                    'customer_currency' => 'USD',
                    // original amounts at time of checkout
                    'total_shop_amount' => 35000 + 40000 - 2300 - 8700, // after discounts
                    'total_customer_amount' => 35000 + 40000 - 2300 - 8700,
                    'original_outstanding_shop_amount' => 64000 - 31300 - 0.1 * 35000,
                    'original_outstanding_customer_amount' => 64000 - 31300 - 0.1 * 35000,
                    'original_tbyb_gross_sales_shop_amount' => 35000,
                    'original_tbyb_gross_sales_customer_amount' => 35000,
                    'original_tbyb_discounts_shop_amount' => 2300,
                    'original_tbyb_discounts_customer_amount' => 2300,
                    'original_upfront_gross_sales_shop_amount' => 40000,
                    'original_upfront_gross_sales_customer_amount' => 40000,
                    'original_upfront_discounts_shop_amount' => 8700,
                    'original_upfront_discounts_customer_amount' => 8700,
                    // refunds
                    'tbyb_refund_gross_sales_shop_amount' => 0,
                    'tbyb_refund_gross_sales_customer_amount' => 0,
                    'upfront_refund_gross_sales_shop_amount' => 0,
                    'upfront_refund_gross_sales_customer_amount' => 0,
                    'tbyb_refund_discounts_shop_amount' => 0,
                    'tbyb_refund_discounts_customer_amount' => 0,
                    'upfront_refund_discounts_shop_amount' => 0,
                    'upfront_refund_discounts_customer_amount' => 0,
                    'total_order_level_refunds_shop_amount' => 0,
                    'total_order_level_refunds_customer_amount' => 0,
                    // net sales
                    'tbyb_net_sales_shop_amount' => 32700,
                    'tbyb_net_sales_customer_amount' => 32700,
                    'upfront_net_sales_shop_amount' => 31300,
                    'upfront_net_sales_customer_amount' => 31300,
                    'total_net_sales_shop_amount' => 64000,
                    'total_net_sales_customer_amount' => 64000,
                    // outstanding
                    'outstanding_shop_amount' => 29200,
                    'outstanding_customer_amount' => 29200,
                ],
                'refunds' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 1700,
                        'order_level_refund_shop_amount' => 1700,
                        'tbyb_discounts_customer_amount' => 200,
                        'tbyb_discounts_shop_amount' => 200,
                        'tbyb_gross_sales_customer_amount' => 5000,
                        'tbyb_gross_sales_shop_amount' => 5000,
                        'tbyb_total_customer_amount' => 4800,
                        'tbyb_total_shop_amount' => 4800,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 6500,
                        'refunded_customer_amount' => 6500,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 6200,
                        'order_level_refund_shop_amount' => 6200,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 400,
                        'upfront_discounts_shop_amount' => 400,
                        'upfront_gross_sales_customer_amount' => 6000,
                        'upfront_gross_sales_shop_amount' => 6000,
                        'upfront_total_customer_amount' => 5600,
                        'upfront_total_shop_amount' => 5600,
                        'refunded_shop_amount' => 11800,
                        'refunded_customer_amount' => 11800,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'order_level_refund_customer_amount' => 400,
                        'order_level_refund_shop_amount' => 400,
                        'tbyb_discounts_customer_amount' => 0,
                        'tbyb_discounts_shop_amount' => 0,
                        'tbyb_gross_sales_customer_amount' => 0,
                        'tbyb_gross_sales_shop_amount' => 0,
                        'tbyb_total_customer_amount' => 0,
                        'tbyb_total_shop_amount' => 0,
                        'upfront_discounts_customer_amount' => 0,
                        'upfront_discounts_shop_amount' => 0,
                        'upfront_gross_sales_customer_amount' => 0,
                        'upfront_gross_sales_shop_amount' => 0,
                        'upfront_total_customer_amount' => 0,
                        'upfront_total_shop_amount' => 0,
                        'refunded_shop_amount' => 400,
                        'refunded_customer_amount' => 400,
                    ],
                ],
                'transactions' => [
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'sale',
                        'shop_amount' => 34800,
                        'customer_amount' => 34800,
                    ],
                    [
                        'id' => 'transaction_id_111',
                        'source_id' => 'gid://shopify/OrderTransaction/111',
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'authorization',
                        'shop_amount' => 29200,
                        'customer_amount' => 29200,
                        'authorization_expires_at' => Date::now()->addDays(7),
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 1700,
                        'customer_amount' => 1700,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 11800,
                        'customer_amount' => 11800,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'refund',
                        'shop_amount' => 400,
                        'customer_amount' => 400,
                    ],
                    [
                        'shop_currency' => 'USD',
                        'customer_currency' => 'USD',
                        'kind' => 'capture',
                        'shop_amount' => 16100,
                        'customer_amount' => 16100,
                        'parent_transaction_id' => 'transaction_id_111',
                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
                    ],
                ],
                'assertions' => [
                    'order' => [
                        'completed' => false,
                        // refunds
                        'tbyb_refund_gross_sales_shop_amount' => 5000,
                        'tbyb_refund_gross_sales_customer_amount' => 5000,
                        'upfront_refund_gross_sales_shop_amount' => 6000,
                        'upfront_refund_gross_sales_customer_amount' => 6000,
                        'tbyb_refund_discounts_shop_amount' => 200,
                        'tbyb_refund_discounts_customer_amount' => 200,
                        'upfront_refund_discounts_shop_amount' => 400,
                        'upfront_refund_discounts_customer_amount' => 400,
                        'total_order_level_refunds_shop_amount' => 8300,
                        'total_order_level_refunds_customer_amount' => 8300,
                        // net sales
                        'tbyb_net_sales_shop_amount' => 27900,
                        'tbyb_net_sales_customer_amount' => 27900,
                        'upfront_net_sales_shop_amount' => 25700,
                        'upfront_net_sales_customer_amount' => 25700,
                        'total_net_sales_shop_amount' => 53600,
                        'total_net_sales_customer_amount' => 53600,
                        // outstanding
                        'outstanding_shop_amount' => 21400,
                        'outstanding_customer_amount' => 21400,
                    ],
                ],
            ],
            //            'Mixed cart with different currencies, with discounts, sale + auth + capture transactions, multiple refunds that exceeds the item value and order level refund, partially paid' => [
            //                'order' => [
            //                    'shop_currency' => 'CAD',
            //                    'customer_currency' => 'USD',
            //                    // original amounts at time of checkout
            //                    'total_shop_amount' => round(64000 * 1.35, PHP_ROUND_HALF_EVEN), // after upfront discounts
            //                    'total_customer_amount' => 64000,
            //                    'original_outstanding_shop_amount' => round((64000 - 31300 - 0.1 * 35000) * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_outstanding_customer_amount' => 64000 - 31300 - 0.1 * 35000,
            //                    'original_tbyb_gross_sales_shop_amount' => round(35000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_tbyb_gross_sales_customer_amount' => 35000,
            //                    'original_tbyb_discounts_shop_amount' => round(2300 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_tbyb_discounts_customer_amount' => 2300,
            //                    'original_upfront_gross_sales_shop_amount' => round(40000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_upfront_gross_sales_customer_amount' => 40000,
            //                    'original_upfront_discounts_shop_amount' => round(8700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_upfront_discounts_customer_amount' => 8700,
            //                    // refunds
            //                    'tbyb_refund_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'tbyb_refund_gross_sales_customer_amount' => 0,
            //                    'upfront_refund_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'upfront_refund_gross_sales_customer_amount' => 0,
            //                    'tbyb_refund_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'tbyb_refund_discounts_customer_amount' => 0,
            //                    'upfront_refund_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'upfront_refund_discounts_customer_amount' => 0,
            //                    'total_order_level_refunds_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'total_order_level_refunds_customer_amount' => 0,
            //                    // net sales
            //                    'tbyb_net_sales_shop_amount' => round(32700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'tbyb_net_sales_customer_amount' => 32700,
            //                    'upfront_net_sales_shop_amount' => round(31300 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'upfront_net_sales_customer_amount' => 31300,
            //                    'total_net_sales_shop_amount' => round(64000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'total_net_sales_customer_amount' => 64000,
            //                    // outstanding
            //                    'outstanding_shop_amount' => round(29200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'outstanding_customer_amount' => 29200,
            //                ],
            //                'refunds' => [
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'order_level_refund_customer_amount' => 1700,
            //                        'order_level_refund_shop_amount' => round(1700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_discounts_customer_amount' => 200,
            //                        'tbyb_discounts_shop_amount' => round(200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_gross_sales_customer_amount' => 5000,
            //                        'tbyb_gross_sales_shop_amount' => round(5000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_total_customer_amount' => 4800,
            //                        'tbyb_total_shop_amount' => round(4800 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_discounts_customer_amount' => 0,
            //                        'upfront_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_gross_sales_customer_amount' => 0,
            //                        'upfront_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_total_customer_amount' => 0,
            //                        'upfront_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'order_level_refund_customer_amount' => 6200,
            //                        'order_level_refund_shop_amount' => round(6200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_discounts_customer_amount' => 0,
            //                        'tbyb_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_gross_sales_customer_amount' => 0,
            //                        'tbyb_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_total_customer_amount' => 0,
            //                        'tbyb_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_discounts_customer_amount' => 400,
            //                        'upfront_discounts_shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_gross_sales_customer_amount' => 6000,
            //                        'upfront_gross_sales_shop_amount' => round(6000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_total_customer_amount' => 5600,
            //                        'upfront_total_shop_amount' => round(5600 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'order_level_refund_customer_amount' => 400,
            //                        'order_level_refund_shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_discounts_customer_amount' => 0,
            //                        'tbyb_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_gross_sales_customer_amount' => 0,
            //                        'tbyb_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_total_customer_amount' => 0,
            //                        'tbyb_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_discounts_customer_amount' => 0,
            //                        'upfront_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_gross_sales_customer_amount' => 0,
            //                        'upfront_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_total_customer_amount' => 0,
            //                        'upfront_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    ],
            //                ],
            //                'transactions' => [
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'sale',
            //                        'shop_amount' => round(34800 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 34800,
            //                    ],
            //                    [
            //                        'id' => 'transaction_id_111',
            //                        'source_id' => 'gid://shopify/OrderTransaction/111',
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'authorization',
            //                        'shop_amount' => round(29200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 29200,
            //                        'authorization_expires_at' => Date::now()->addDays(7),
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'refund',
            //                        'shop_amount' => round(1700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 1700,
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'refund',
            //                        'shop_amount' => round(11800 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 11800,
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'refund',
            //                        'shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 400,
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'capture',
            //                        'shop_amount' => round(4000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 4000,
            //                        'parent_transaction_id' => 'transaction_id_111',
            //                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
            //                    ],
            //                ],
            //                'assertions' => [
            //                    'order' => [
            //                        'completed' => false,
            //                        // refunds
            //                        'tbyb_refund_gross_sales_shop_amount' => round(5000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_refund_gross_sales_customer_amount' => 5000,
            //                        'upfront_refund_gross_sales_shop_amount' => round(6000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_refund_gross_sales_customer_amount' => 6000,
            //                        'tbyb_refund_discounts_shop_amount' => round(200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_refund_discounts_customer_amount' => 200,
            //                        'upfront_refund_discounts_shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_refund_discounts_customer_amount' => 400,
            //                        'total_order_level_refunds_shop_amount' => round(8300 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'total_order_level_refunds_customer_amount' => 8300,
            //                        // net sales
            //                        'tbyb_net_sales_shop_amount' => round(27900 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_net_sales_customer_amount' => 27900,
            //                        'upfront_net_sales_shop_amount' => round(25700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_net_sales_customer_amount' => 25700,
            //                        'total_net_sales_shop_amount' => round(53600 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'total_net_sales_customer_amount' => 53600,
            //                        // outstanding
            //                        'outstanding_shop_amount' => round(12100 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'outstanding_customer_amount' => 12100,
            //                    ],
            //                ],
            //            ],
            //            'Mixed cart with different currencies, with discounts, sale + auth + capture transactions, multiple refunds that exceeds the item value and order level refund, fully paid' => [
            //                'order' => [
            //                    'shop_currency' => 'CAD',
            //                    'customer_currency' => 'USD',
            //                    // original amounts at time of checkout
            //                    'total_shop_amount' => round(64000 * 1.35, PHP_ROUND_HALF_EVEN), // after upfront discounts
            //                    'total_customer_amount' => 64000,
            //                    'original_outstanding_shop_amount' => round((64000 - 31300 - 0.1 * 35000) * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_outstanding_customer_amount' => 64000 - 31300 - 0.1 * 35000,
            //                    'original_tbyb_gross_sales_shop_amount' => round(35000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_tbyb_gross_sales_customer_amount' => 35000,
            //                    'original_tbyb_discounts_shop_amount' => round(2300 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_tbyb_discounts_customer_amount' => 2300,
            //                    'original_upfront_gross_sales_shop_amount' => round(40000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_upfront_gross_sales_customer_amount' => 40000,
            //                    'original_upfront_discounts_shop_amount' => round(8700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'original_upfront_discounts_customer_amount' => 8700,
            //                    // refunds
            //                    'tbyb_refund_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'tbyb_refund_gross_sales_customer_amount' => 0,
            //                    'upfront_refund_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'upfront_refund_gross_sales_customer_amount' => 0,
            //                    'tbyb_refund_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'tbyb_refund_discounts_customer_amount' => 0,
            //                    'upfront_refund_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'upfront_refund_discounts_customer_amount' => 0,
            //                    'total_order_level_refunds_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'total_order_level_refunds_customer_amount' => 0,
            //                    // net sales
            //                    'tbyb_net_sales_shop_amount' => round(32700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'tbyb_net_sales_customer_amount' => 32700,
            //                    'upfront_net_sales_shop_amount' => round(31300 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'upfront_net_sales_customer_amount' => 31300,
            //                    'total_net_sales_shop_amount' => round(64000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'total_net_sales_customer_amount' => 64000,
            //                    // outstanding
            //                    'outstanding_shop_amount' => round(29200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    'outstanding_customer_amount' => 29200,
            //                ],
            //                'refunds' => [
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'order_level_refund_customer_amount' => 1700,
            //                        'order_level_refund_shop_amount' => round(1700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_discounts_customer_amount' => 200,
            //                        'tbyb_discounts_shop_amount' => round(200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_gross_sales_customer_amount' => 5000,
            //                        'tbyb_gross_sales_shop_amount' => round(5000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_total_customer_amount' => 4800,
            //                        'tbyb_total_shop_amount' => round(4800 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_discounts_customer_amount' => 0,
            //                        'upfront_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_gross_sales_customer_amount' => 0,
            //                        'upfront_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_total_customer_amount' => 0,
            //                        'upfront_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'order_level_refund_customer_amount' => 6200,
            //                        'order_level_refund_shop_amount' => round(6200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_discounts_customer_amount' => 0,
            //                        'tbyb_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_gross_sales_customer_amount' => 0,
            //                        'tbyb_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_total_customer_amount' => 0,
            //                        'tbyb_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_discounts_customer_amount' => 400,
            //                        'upfront_discounts_shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_gross_sales_customer_amount' => 6000,
            //                        'upfront_gross_sales_shop_amount' => round(6000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_total_customer_amount' => 5600,
            //                        'upfront_total_shop_amount' => round(5600 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'order_level_refund_customer_amount' => 400,
            //                        'order_level_refund_shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_discounts_customer_amount' => 0,
            //                        'tbyb_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_gross_sales_customer_amount' => 0,
            //                        'tbyb_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_total_customer_amount' => 0,
            //                        'tbyb_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_discounts_customer_amount' => 0,
            //                        'upfront_discounts_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_gross_sales_customer_amount' => 0,
            //                        'upfront_gross_sales_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_total_customer_amount' => 0,
            //                        'upfront_total_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                    ],
            //                ],
            //                'transactions' => [
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'sale',
            //                        'shop_amount' => round(34800 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 34800,
            //                    ],
            //                    [
            //                        'id' => 'transaction_id_111',
            //                        'source_id' => 'gid://shopify/OrderTransaction/111',
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'authorization',
            //                        'shop_amount' => round(29200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 29200,
            //                        'authorization_expires_at' => Date::now()->addDays(7),
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'refund',
            //                        'shop_amount' => round(1700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 1700,
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'refund',
            //                        'shop_amount' => round(11800 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 11800,
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'refund',
            //                        'shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 400,
            //                    ],
            //                    [
            //                        'shop_currency' => 'CAD',
            //                        'customer_currency' => 'USD',
            //                        'kind' => 'capture',
            //                        'shop_amount' => round(16100 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'customer_amount' => 16100,
            //                        'parent_transaction_id' => 'transaction_id_111',
            //                        'parent_transaction_source_id' => 'gid://shopify/OrderTransaction/111',
            //                    ],
            //                ],
            //                'assertions' => [
            //                    'order' => [
            //                        'completed' => true,
            //                        // refunds
            //                        'tbyb_refund_gross_sales_shop_amount' => round(5000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_refund_gross_sales_customer_amount' => 5000,
            //                        'upfront_refund_gross_sales_shop_amount' => round(6000 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_refund_gross_sales_customer_amount' => 6000,
            //                        'tbyb_refund_discounts_shop_amount' => round(200 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_refund_discounts_customer_amount' => 200,
            //                        'upfront_refund_discounts_shop_amount' => round(400 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_refund_discounts_customer_amount' => 400,
            //                        'total_order_level_refunds_shop_amount' => round(8300 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'total_order_level_refunds_customer_amount' => 8300,
            //                        // net sales
            //                        'tbyb_net_sales_shop_amount' => round(27900 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'tbyb_net_sales_customer_amount' => 27900,
            //                        'upfront_net_sales_shop_amount' => round(25700 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'upfront_net_sales_customer_amount' => 25700,
            //                        'total_net_sales_shop_amount' => round(53600 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'total_net_sales_customer_amount' => 53600,
            //                        // outstanding
            //                        'outstanding_shop_amount' => round(0 * 1.35, PHP_ROUND_HALF_EVEN),
            //                        'outstanding_customer_amount' => 0,
            //                    ],
            //                ],
            //            ],
        ];
    }
}
